# This will add one async pio task per node to a test
# does not work for all cases
./xmlchange --force PIO_ASYNC_INTERFACE=TRUE
ntasks=`./xmlquery --value TOTALPES`
ninst=`./xmlquery --value NINST`
tpn=`./xmlquery --value MAX_MPITASKS_PER_NODE`
echo "ntasks=$ntasks tpn=$tpn"
./xmlchange --force PIO_ASYNCIO_STRIDE=$tpn
let piontasks=(ntasks/ninst)/tpn
echo "piontasks=$piontasks"
./xmlchange --force PIO_ASYNCIO_NTASKS=$piontasks
let newntasks=ntasks/ninst-piontasks
echo "newntasks=$newntasks"
./xmlchange --force NTASKS=$newntasks
./xmlchange --force PIO_REARRANGER=2